<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Study ZONE | Enrolment Request</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Segoe UI, Arial, sans-serif;
  background:#eef3ff;
  margin:0;
}
.container{
  max-width:720px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:8px;
}
label{
  font-weight:600;
  font-size:13px;
  margin-top:12px;
  display:block;
}
input, select, textarea{
  width:100%;
  padding:8px;
  margin-top:4px;
}
input[readonly]{
  background:#f3f5f8;
}
button{
  margin-top:18px;
  padding:12px;
  width:100%;
  background:#004aad;
  color:#fff;
  border:none;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="container">
<h2>Enrolment Request</h2>

<form id="enrollForm">

<label>Member Type *</label>
<select id="memberType" name="Member Type" required>
  <option value="">Select</option>
  <option>First Time</option>
  <option>Existing Member</option>
</select>

<div id="mainFields" style="display:none">

<label>Full Name *</label>
<input name="Full Name" required>

<label>Mobile Number *</label>
<input name="Mobile Number" maxlength="10" required>

<label>Email ID</label>
<input type="email" name="Email ID">

<div id="addressBlock">
  <label>Address *</label>
  <textarea name="Address"></textarea>
</div>

<div id="cityBlock">
  <label>City *</label>
  <input name="City">
</div>

<label>Exam Preparing for *</label>
<input name="Exam Preparing for" required>

<label>Preferred Branch *</label>
<select id="branch" name="Preferred Branch" required>
  <option value="">Select</option>
  <option>Dombivli East (MIDC)</option>
  <option>Dombivli West</option>
</select>

<label>Preferred Plan *</label>
<select id="plan" name="Preferred Plan" required>
  <option value="">Select</option>
  <option>Max Plan – Full Day</option>
  <option>Light Plan – Morning Slot</option>
  <option>Light Plan – Afternoon Slot</option>
  <option>Light Plan – Evening Slot</option>
  <option>Light flexi Plan - Morning + Afternoon Slot</option>
  <option>Light flexi Plan - Morning + Evening Slot</option>
  <option>Light flexi Plan - Afternoon + Evening Slot</option>
  <option>Weekend - Only Saturday & Sunday</option>
  <option>Mini Plan - Morning Slot</option>
  <option>Mini Plan - Evening Slot</option>
  <option>Single Day Plan - Full Day</option>
</select>

<label>Any specific requirement or message</label>
<textarea name="Any specific requirement or message"></textarea>

<label>Start Date *</label>
<input type="date" id="startDate" name="Start Date" required>

<label>No. of Days to Book *</label>
<input type="number" id="days" name="No. of Days to Book" required>

<label>End Date</label>
<input id="endDateView" readonly>

<label>Estimated Cost (₹)</label>
<input id="estView" readonly>

<label>Registration Fees (₹)</label>
<input id="regView" readonly>

<label>Grand Estimated Cost (₹)</label>
<input id="grandView" readonly>

<input type="hidden" name="Unit Price">
<input type="hidden" name="End Date">
<input type="hidden" name="Estimated Cost">
<input type="hidden" name="Registration Fees">
<input type="hidden" name="Grand Estimated Cost">

<button type="submit">Submit Subscription Request</button>

</div>
</form>
</div>

<script>
const memberType = document.getElementById("memberType");
const mainFields = document.getElementById("mainFields");
const addressBlock = document.getElementById("addressBlock");
const cityBlock = document.getElementById("cityBlock");
const startDate = document.getElementById("startDate");
const form = document.getElementById("enrollForm");

startDate.min = new Date().toISOString().split("T")[0];

function formatDate(d){
  return d.toLocaleDateString("en-GB", {
    day:"2-digit",
    month:"short",
    year:"numeric"
  });
}

memberType.addEventListener("change", () => {
  if(!memberType.value){
    mainFields.style.display = "none";
    return;
  }

  mainFields.style.display = "block";

  if(memberType.value === "Existing Member"){
    addressBlock.style.display = "none";
    cityBlock.style.display = "none";
  }else{
    addressBlock.style.display = "block";
    cityBlock.style.display = "block";
  }
});

startDate.addEventListener("change", () => {
  if(startDate.value){
    const d = new Date(startDate.value);
    startDate.setAttribute("data-display", formatDate(d));
  }
});

form.addEventListener("submit", e => {
  e.preventDefault();

  fetch("https://script.google.com/macros/s/AKfycby-stYcFCHWOJWPebMMMnkwPCuw08XJY1CffLiK5P-Octo840UnEK1xJmePS0K6ln1bKA/exec", {
    method: "POST",
    body: new FormData(form)
  })
  .then(res => res.json())
  .then(() => {
    alert("Enrolment submitted successfully");
    form.reset();
    mainFields.style.display = "none";
  });
});
</script>

</body>
</html>
