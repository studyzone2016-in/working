<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study ZONE | Enrolment Request</title>

<style>
body {
  margin: 0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: linear-gradient(135deg, #e6f0ff, #f9fbff);
  color: #003366;
}
.container {
  max-width: 720px;
  margin: 15px auto;
  background: #ffffff;
  padding: 18px 22px;
  border-radius: 8px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
  color: #004aad;
  font-size: 22px;
}
label {
  display: block;
  margin-top: 10px;
  font-weight: 600;
  font-size: 13px;
}
input, select, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  border-radius: 5px;
  border: 1px solid #ccc;
  font-size: 13px;
}
input[readonly] {
  background: #f2f4f8;
}
button {
  width: 100%;
  margin-top: 18px;
  padding: 10px;
  background: #004aad;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 15px;
  cursor: pointer;
}
.success-message {
  text-align: center;
  padding: 26px;
  background: #e8f5e9;
  color: #1b5e20;
  border-radius: 8px;
  font-size: 15px;
}
.home-btn {
  display: inline-block;
  margin-top: 14px;
  padding: 10px 18px;
  background: #004aad;
  color: #fff;
  text-decoration: none;
  border-radius: 6px;
}
</style>
</head>

<body>
<div class="container" id="mainBox">
<h1>Enrolment Request</h1>

<form id="enrollForm">

  <label>Member Type *</label>
  <select id="memberType" name="memberType" required>
    <option value="">Select</option>
    <option value="First Time">First Time</option>
    <option value="Existing Member">Existing Member</option>
  </select>

  <div id="formFields" style="display:none;">

    <label>Full Name *</label>
    <input type="text" name="name" required>

    <label>Mobile Number *</label>
    <input type="tel" name="mobile" pattern="[0-9]{10}" maxlength="10" required>

    <label>Email ID</label>
    <input type="email" name="email">

    <div id="firstTimeOnly">
      <label>Address *</label>
      <textarea name="address"></textarea>

      <label>City *</label>
      <input type="text" name="city">
    </div>

    <label>Exam Preparing For *</label>
    <input type="text" name="exam" required>

    <label>Preferred Branch *</label>
    <select id="branch" name="branch" required>
      <option value="">Select</option>
      <option>Dombivli West</option>
      <option>Dombivli East (MIDC)</option>
    </select>

    <label>Preferred Plan *</label>
    <select id="plan" name="plan" required>
      <option value="">Select</option>
      <option>Max Plan – Full Day</option>
      <option>Light Plan – Morning Slot</option>
      <option>Light Plan – Afternoon Slot</option>
      <option>Light Plan – Evening Slot</option>
      <option>Light flexi Plan - Morning + Afternoon Slot</option>
      <option>Light flexi Plan - Morning + Evening Slot</option>
      <option>Light flexi Plan - Afternoon + Evening Slot</option>
      <option>Weekend - Only Saturday & Sunday</option>
      <option>Mini Plan - Morning Slot</option>
      <option>Mini Plan - Evening Slot</option>
      <option>Single Day Plan - Full Day</option>
    </select>

    <label>Start Date *</label>
    <input type="text" id="startDateDisplay" readonly placeholder="Select Start Date">
    <input type="date" id="startDate" name="startDate" hidden required>

    <label>No. of Days to Book *</label>
    <input type="number" id="days" name="days" min="1" required>

    <label>End Date</label>
    <input type="text" id="endDate" name="endDate" readonly>

    <label>Estimated Cost (₹)</label>
    <input type="text" id="estimatedCost" name="estimatedCost" readonly>

    <label>Registration Fees (₹)</label>
    <input type="text" id="registrationFee" name="registrationFee" readonly>

    <label><strong>Grand Estimated Cost (₹)</strong></label>
    <input type="text" id="grandTotal" name="grandTotal" readonly>

    <button type="submit">Submit Subscription Request</button>
  </div>
</form>
</div>

<script>
const memberType = document.getElementById("memberType");
const formFields = document.getElementById("formFields");
const firstTimeOnly = document.getElementById("firstTimeOnly");
const plan = document.getElementById("plan");
const startDate = document.getElementById("startDate");
const startDateDisplay = document.getElementById("startDateDisplay");
const days = document.getElementById("days");
const endDate = document.getElementById("endDate");
const estimatedCost = document.getElementById("estimatedCost");
const registrationFee = document.getElementById("registrationFee");
const grandTotal = document.getElementById("grandTotal");
const box = document.getElementById("mainBox");

const priceTable = {
  "Dombivli East (MIDC)": {
    "Max Plan – Full Day": 94,
    "Light Plan – Morning Slot": 54,
    "Light Plan – Afternoon Slot": 54,
    "Light Plan – Evening Slot": 54,
    "Light flexi Plan - Morning + Afternoon Slot": 74,
    "Light flexi Plan - Morning + Evening Slot": 74,
    "Light flexi Plan - Afternoon + Evening Slot": 74,
    "Weekend - Only Saturday & Sunday": 66.7,
    "Mini Plan - Morning Slot": 40,
    "Mini Plan - Evening Slot": 40,
    "Single Day Plan - Full Day": 250
  },
  "Dombivli West": {
    "Max Plan – Full Day": 60,
    "Light Plan – Morning Slot": 40,
    "Light Plan – Afternoon Slot": 40,
    "Light Plan – Evening Slot": 40,
    "Light flexi Plan - Morning + Afternoon Slot": 50,
    "Light flexi Plan - Morning + Evening Slot": 50,
    "Light flexi Plan - Afternoon + Evening Slot": 50,
    "Weekend - Only Saturday & Sunday": 42.7,
    "Mini Plan - Morning Slot": 25,
    "Mini Plan - Evening Slot": 25,
    "Single Day Plan - Full Day": 150
  }
};

memberType.addEventListener("change", () => {
  formFields.style.display = memberType.value ? "block" : "none";
  firstTimeOnly.style.display = memberType.value === "First Time" ? "block" : "none";
  calculateAll();
});

startDateDisplay.addEventListener("click", () => startDate.showPicker());

startDate.addEventListener("change", () => {
  const d = new Date(startDate.value);
  startDateDisplay.value = d.toLocaleDateString("en-GB", {
    day: "2-digit", month: "short", year: "numeric"
  });
  calculateAll();
});

[plan, days].forEach(el => el.addEventListener("input", calculateAll));

function validateDays() {
  const d = parseInt(days.value);
  if (!plan.value || !d) return true;

  if (plan.value === "Weekend - Only Saturday & Sunday" && d % 30 !== 0) {
    alert("Weekend plan requires booking in multiples of 30 days.");
    return false;
  }

  if (plan.value === "Single Day Plan - Full Day" && d !== 1) {
    alert("Single Day Plan allows only 1 day booking.");
    return false;
  }

  if (plan.value !== "Single Day Plan - Full Day" &&
      plan.value !== "Weekend - Only Saturday & Sunday" &&
      d < 8) {
    alert("Minimum booking for this plan is 8 days.");
    return false;
  }

  return true;
}

function calculateAll() {
  if (!validateDays()) {
    days.value = "";
    return;
  }

  if (startDate.value && days.value) {
    const sd = new Date(startDate.value);
    sd.setDate(sd.getDate() + parseInt(days.value) - 1);
    endDate.value = sd.toLocaleDateString("en-GB", {
      day: "2-digit", month: "short", year: "numeric"
    });
  }

  const regFee = memberType.value === "First Time" ? 175 : 0;
  registrationFee.value = regFee;
  grandTotal.value = estimatedCost.value
    ? (parseFloat(estimatedCost.value) + regFee).toFixed(2)
    : "";
}

document.getElementById("enrollForm").addEventListener("submit", function(e){
  e.preventDefault();
  if (!validateDays()) return;

  box.innerHTML = `
    <div class="success-message">
      ✅ <strong>Thank you!</strong><br><br>
      Your enrolment request has been received.<br>
      Our team will contact you shortly.<br>
      <a href="index.html" class="home-btn">Go to Home Page</a>
    </div>`;
});
</script>
</body>
</html>
