<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study ZONE | Enrolment Request</title>

<style>
body {
  margin: 0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: linear-gradient(135deg, #e6f0ff, #f9fbff);
  color: #003366;
}
.container {
  max-width: 720px;
  margin: 15px auto;
  background: #ffffff;
  padding: 18px 22px;
  border-radius: 8px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.1);
}
h1 {
  text-align: center;
  color: #004aad;
  font-size: 22px;
}
label {
  display: block;
  margin-top: 10px;
  font-weight: 600;
  font-size: 13px;
}
input, select, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  border-radius: 5px;
  border: 1px solid #ccc;
  font-size: 13px;
}
input[readonly] {
  background: #f2f4f8;
}
button {
  width: 100%;
  margin-top: 18px;
  padding: 10px;
  background: #004aad;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 15px;
  cursor: pointer;
}
.success {
  text-align: center;
  padding: 30px;
}
.success a {
  display: inline-block;
  margin-top: 14px;
  color: #004aad;
  font-weight: 600;
  text-decoration: none;
}
</style>
</head>

<body>
<div class="container">

<h1>Enrolment Request</h1>

<form id="enrollForm">

  <label>Member Type *</label>
  <select id="memberType" required>
    <option value="">Select</option>
    <option>First Time</option>
    <option>Existing Member</option>
  </select>

  <div id="formFields" style="display:none;">

    <label>Full Name *</label>
    <input type="text" required>

    <label>Mobile Number *</label>
    <input type="tel" pattern="[0-9]{10}" maxlength="10" required>

    <label>Email ID</label>
    <input type="email">

    <div id="firstTimeOnly">
      <label>Address *</label>
      <textarea></textarea>
      <label>City *</label>
      <input type="text">
    </div>

    <label>Exam Preparing For *</label>
    <input type="text" required>

    <label>Preferred Branch *</label>
    <select id="branch" required>
      <option value="">Select</option>
      <option>Dombivli West</option>
      <option>Dombivli East (MIDC)</option>
    </select>

    <label>Preferred Plan *</label>
    <select id="plan" required>
      <option value="">Select</option>
      <option>Max Plan – Full Day</option>
      <option>Light Plan – Morning Slot</option>
      <option>Light Plan – Afternoon Slot</option>
      <option>Light Plan – Evening Slot</option>
      <option>Light flexi Plan - Morning + Afternoon Slot</option>
      <option>Light flexi Plan - Morning + Evening Slot</option>
      <option>Light flexi Plan - Afternoon + Evening Slot</option>
      <option>Weekend - Only Saturday & Sunday</option>
      <option>Mini Plan - Morning Slot</option>
      <option>Mini Plan - Evening Slot</option>
      <option>Single Day Plan - Full Day</option>
    </select>

    <label>Start Date *</label>
    <input type="text" id="startDateDisplay" readonly placeholder="Select Start Date">
    <input type="date" id="startDate" hidden required>

    <label>No. of Days to Book *</label>
    <input type="number" id="days" min="1" required>

    <label>End Date</label>
    <input type="text" id="endDate" readonly>

    <label>Estimated Cost (₹)</label>
    <input type="text" id="estimatedCost" readonly>

    <label>Registration Fees (₹)</label>
    <input type="text" id="registrationFee" readonly>

    <label><strong>Grand Estimated Cost (₹)</strong></label>
    <input type="text" id="grandTotal" readonly>

    <button type="submit">Submit Subscription Request</button>
  </div>
</form>

<div id="successMessage" class="success" style="display:none;">
  <h2>✅ Thank you!</h2>
  <p>Your enrolment request has been received.<br>
     Our team will contact you shortly.</p>
  <a href="index.html">Go to Home Page</a>
</div>

</div>

<script>
const memberType = document.getElementById("memberType");
const formFields = document.getElementById("formFields");
const firstTimeOnly = document.getElementById("firstTimeOnly");
const branch = document.getElementById("branch");
const plan = document.getElementById("plan");
const startDate = document.getElementById("startDate");
const startDateDisplay = document.getElementById("startDateDisplay");
const days = document.getElementById("days");
const endDate = document.getElementById("endDate");
const estimatedCost = document.getElementById("estimatedCost");
const registrationFee = document.getElementById("registrationFee");
const grandTotal = document.getElementById("grandTotal");

const priceTable = {
  "Dombivli East (MIDC)": {
    "Max Plan – Full Day": 94,
    "Light Plan – Morning Slot": 54,
    "Light Plan – Afternoon Slot": 54,
    "Light Plan – Evening Slot": 54,
    "Light flexi Plan - Morning + Afternoon Slot": 74,
    "Light flexi Plan - Morning + Evening Slot": 74,
    "Light flexi Plan - Afternoon + Evening Slot": 74,
    "Weekend - Only Saturday & Sunday": 66.7,
    "Mini Plan - Morning Slot": 40,
    "Mini Plan - Evening Slot": 40,
    "Single Day Plan - Full Day": 250
  },
  "Dombivli West": {
    "Max Plan – Full Day": 60,
    "Light Plan – Morning Slot": 40,
    "Light Plan – Afternoon Slot": 40,
    "Light Plan – Evening Slot": 40,
    "Light flexi Plan - Morning + Afternoon Slot": 50,
    "Light flexi Plan - Morning + Evening Slot": 50,
    "Light flexi Plan - Afternoon + Evening Slot": 50,
    "Weekend - Only Saturday & Sunday": 42.7,
    "Mini Plan - Morning Slot": 25,
    "Mini Plan - Evening Slot": 25,
    "Single Day Plan - Full Day": 150
  }
};

memberType.onchange = () => {
  formFields.style.display = memberType.value ? "block" : "none";
  firstTimeOnly.style.display = memberType.value === "First Time" ? "block" : "none";
};

startDateDisplay.onclick = () => startDate.showPicker();

startDate.onchange = () => {
  const today = new Date(); today.setHours(0,0,0,0);
  const selected = new Date(startDate.value);
  if (selected < today) {
    alert("Past dates are not allowed.");
    startDate.value = "";
    startDateDisplay.value = "";
    return;
  }
  startDateDisplay.value = selected.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});
  calculate();
};

days.onblur = validateDays;
[branch, plan].forEach(el => el.onchange = calculate);

function validateDays() {
  const d = parseInt(days.value || 0);
  if (!d) return true;

  if (plan.value === "Weekend - Only Saturday & Sunday" && d % 30 !== 0) {
    alert("Weekend plan must be booked in multiples of 30 days.");
    days.focus();
    return false;
  }

  if (
    plan.value !== "Single Day Plan - Full Day" &&
    plan.value !== "Weekend - Only Saturday & Sunday" &&
    d < 8
  ) {
    alert("Minimum 8 days required for this plan.");
    days.focus();
    return false;
  }
  return true;
}

function calculate() {
  if (!validateDays()) return;

  const unit = priceTable[branch.value]?.[plan.value] || 0;
  const d = parseInt(days.value || 0);

  if (startDate.value && d) {
    const ed = new Date(startDate.value);
    ed.setDate(ed.getDate() + d - 1);
    endDate.value = ed.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});
  }

  const est = unit * d;
  estimatedCost.value = est ? est.toFixed(2) : "";
  registrationFee.value = memberType.value === "First Time" ? 175 : 0;
  grandTotal.value = est ? (est + Number(registrationFee.value)).toFixed(2) : "";
}

document.getElementById("enrollForm").onsubmit = e => {
  e.preventDefault();
  if (!validateDays()) return;
  document.getElementById("enrollForm").style.display = "none";
  document.getElementById("successMessage").style.display = "block";
};
</script>

</body>
</html>
